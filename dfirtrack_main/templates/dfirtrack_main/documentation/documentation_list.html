<!-- extending maintemplate -->
{% extends "dfirtrack_main/maintemplate.html" %}

<!-- HTML head in maintemplate -->
{% block head %}

<!-- page title -->
<title>
    DFIRTrack - Documentation
</title>

{% load static %}
{% load martortags %}

<!-- javascript and CSS for datatables -->
<link rel="stylesheet" type="text/css" href="{% static 'dfirtrack_main/datatables-1.10.16/datatables.min.css' %}"/>
<script src="{% static 'dfirtrack_main/datatables-1.10.16/datatables.js' %}"></script>

<!-- martor -->
{% include "dfirtrack_main/includes/martor_css.html" %}

<!-- HTML head in maintemplate -->
{% endblock %}

<!-- ############################################ -->

<!-- HTML body in maintemplate -->
{% block content %}

<!-- overall row -->
<div class="row">

<!-- content column -->
<div class="col-10">

<!-- ############################################ -->

<!-- headline / button row -->
<div class="row">

    <!-- headline -->
    <div class="col-auto me-auto">
        <h1>
            <img src="{% static 'dfirtrack_main/icons/document-light.svg' %}" class="icon right-distance copy-false" alt="icon">
            Documentation
        </h1>
    </div>

    <!-- note / reportitem add button -->
    <div class="col-auto">

        <a href="{% url 'note_create' %}?documentation" type="button" class="btn btn-light btn-sm copy-false">
            <img src="{% static 'dfirtrack_main/icons/plus.svg' %}" class="icon-sm right-distance copy-false" alt="icon">
            Add note
        </a>

        <a href="{% url 'reportitem_create' %}?documentation" type="button" class="btn btn-light btn-sm copy-false">
            <img src="{% static 'dfirtrack_main/icons/plus.svg' %}" class="icon-sm right-distance copy-false" alt="icon">
            Add reportitem
        </a>

    </div>

</div>

<!-- ############################################ -->

<!-- headline -->
<div class="row top-distance bottom-distance">
    <div class="col">
        <h2 id="cross_system_documentation">
            Cross-system documentation (notes)
        </h2>
    </div>
</div>

<!-- NOTES -->

<!-- iterate over notes -->
{% for i in note_list %}

    <!-- note headline row -->
    <div class="row top-distance">

        <!-- note headline and subheadline -->
        <div class="col-auto me-auto">
            <h3 id="note_id_{{ i.note_id }}">
                <img src="/static/dfirtrack_main/icons/paperclip-light.svg" class="icon right-distance copy-false" alt="icon">
                <a href="{{ i.get_absolute_url }}">
                    {{ i.note_title }}
                </a>
            </h3>
        </div>

        <!-- edit button -->
        <div class="col-auto">
            <a href="{{ i.get_update_url }}?documentation" type="button" class="btn btn-sm btn-light copy-false">
                <img src="{% static 'dfirtrack_main/icons/pencil.svg' %}" class="icon-sm right-distance copy-false" alt="icon">
                Edit
            </a>
        </div>

    <!-- note headline row -->
    </div>

    <!-- note metadata row -->
    <div class="row small text-muted">

        <!-- note id -->
        <div class="col-1">
            Note-ID: {{ i.note_id }}
        </div>

        <!-- note version -->
        <div class="col-5">
            Version: {{ i.note_version }}
        </div>

        <!-- note create time / user -->
        <div class="col-3">
            Created {{ i.note_create_time|date:"Y-m-d H:i" }} by {{ i.note_created_by_user_id }}
        </div>

        <!-- note modify time / user -->
        <div class="col-3">
            Modified {{ i.note_modify_time|date:"Y-m-d H:i" }} by {{ i.note_modified_by_user_id }}
        </div>

    <!-- note metadata row -->
    </div>

    <!-- note content row -->
    <div class="card bg-dark border-light card-body top-distance bottom-distance markdown-preview">
        {{ i.note_content|safe_markdown }}
    </div>
    <!-- note content -->

<!-- iterate over notes -->
{% endfor %}

<!-- ############################################ -->

<!-- headline -->
<div class="row bottom-distance">
    <div class="col">
        <h2 id="system_based_documentation">
            System-based documentation (reportitems)
        </h2>
    </div>
</div>

<!-- REPORTITEMS -->

<!-- iterate over reportitems -->
{% for i in reportitem_list %}

    <!-- system reportitem headline row -->
    <div class="row top-distance">

        <!-- system, reportitem headline and subheadline -->
        <div class="col-auto me-auto">
            <h3 id="reportitem_id_{{ i.reportitem_id }}">
                <!-- system -->
                <a href="{{ i.system.get_absolute_url }}">
                    <img src="{% static 'dfirtrack_main/icons/monitor-light.svg' %}" class="icon right-distance copy-false" alt="icon">
                    {{ i.system.system_name }}
                </a>
                <!-- hyphen -->
                -
                <!-- reportitem headline and subheadline -->
                <a href="{{ i.get_absolute_url }}">
                    {{ i.headline }}
                </a>
                <!-- reportitem headline and subheadline -->
                {% if i.reportitem_subheadline %}
                    - {{ i.reportitem_subheadline }}
                {% endif %}
            </h3>
        </div>

        <!-- edit button -->
        <div class="col-auto">
            <a href="{{ i.get_update_url }}?documentation" type="button" class="btn btn-sm btn-light copy-false">
                <img src="{% static 'dfirtrack_main/icons/pencil.svg' %}" class="icon-sm right-distance copy-false" alt="icon">
                Edit
            </a>
        </div>

    <!-- system reportitem headline row -->
    </div>

    <!-- system reportitem metadata row -->
    <div class="row small text-muted">

        <!-- reportitem id -->
        <div class="col-6">
            Reportitem-ID: {{ i.reportitem_id }}
        </div>

        <!-- reportitem create time -->
        <div class="col-3">
            Created {{ i.reportitem_create_time|date:"Y-m-d H:i" }} by {{ i.reportitem_created_by_user_id }}
        </div>

        <!-- reportitem modify time -->
        <div class="col-3">
            Modified {{ i.reportitem_modify_time|date:"Y-m-d H:i" }} by {{ i.reportitem_modified_by_user_id }}
        </div>

    <!-- system reportitem metadata row -->
    </div>

    <!-- reportitem note row -->
    <div class="card bg-dark border-light card-body top-distance bottom-distance markdown-preview">
        {{ i.reportitem_note|safe_markdown }}
    </div>
    <!-- reportitem note -->

<!-- iterate over reportitems -->
{% endfor %}

<!-- ############################################ -->

<!-- content column -->
</div>

<!-- ############################################ -->

<!-- TABLE OF CONTENT -->

<!-- table of content column -->
<div class="col-2 copy-false toc">

    <nav id="tableOfContents" class="navbar">

        <ul class="nav navbar-nav flex-column">

            <!-- cross_system_documentation -->
            <li class="nav-item">
                <a  class="nav-link" href="#cross_system_documentation">
                    Cross-based documentation
                </a>
            </li>

            <!-- iterate over notes -->
            {% for i in note_list %}

                <!-- note -->
                <li class="nav-item nav-left-distance">
                    <a class="nav-link" href="#note_id_{{ i.note_id }}">
                        {{ i.note_title }}
                    </a>
                </li>

            <!-- iterate over notes -->
            {% endfor %}

            <!-- system_based_documentation -->
            <li class="nav-item">
                <a class="nav-link" href="#system_based_documentation">
                    System-based documentation
                </a>
            </li>

            <!-- iterate over reportitems -->
            {% for i in reportitem_list %}

            <!-- reportitem -->
                <li class="nav-item nav-left-distance">
                    <a class="nav-link" href="#reportitem_id_{{ i.reportitem_id }}">
                        {{ i.system.system_name }} - {{ i.headline.headline_name }}
                    </a>
                </li>

            <!-- iterate over reportitems -->
            {% endfor %}

        </ul>
    </nav>
<!-- table of content column -->
</div>

<!-- ############################################ -->

<!-- overall row -->
</div>

<!-- ############################################ -->

<!-- javascript for datatables -->
<script src="{% static 'dfirtrack_main/dfirtrack/datatables_dfirtrack.js' %}"></script>

<!-- javascript for datatables -->
{% block datatables %}
<script src="{% static 'dfirtrack_main/datatables-1.10.16/datatables.min.js' %}"></script>
{% endblock %}

<!-- martor -->
{% include "dfirtrack_main/includes/martor_javascript.html" %}

<!-- HTML body in maintemplate -->
{% endblock %}
